---
import Icon from "@/components/Icon.astro";

const content = {
  subtitle: "SOBRE NOSOTROS",
  title: "Protege lo que Más Importa",
  description:
    "Imagina dormir tranquilo sabiendo que tu familia y patrimonio están bajo la vigilancia de sistemas inteligentes de última generación. En GVolts transformamos la seguridad tradicional en una experiencia tecnológica que se anticipa a cualquier amenaza.",
  features: [
    {
      icon: "ruler-pen",
      title: "Instalación Express en 48hrs",
      description:
        "Equipo de élite certificado que transforma tu espacio en una fortaleza digital sin interrumpir tu rutina",
    },
    {
      icon: "magnifer",
      title: "Vigilancia Inteligente 24/7",
      description:
        "IA que detecta amenazas antes de que ocurran, con respuesta inmediata y alertas en tiempo real a tu móvil",
    },
  ],
  stats: {
    clients: {
      value: "10k+",
      label: "Clients",
      image: "/img/gvolts/img2.png", // Using img2 as the 'clients' photo representation
    },
    experience: {
      value: "25",
      label: "Years Of experience",
    },
  },
  mainImage: {
    src: "/img/gvolts/img1.png",
    alt: "Técnico instalando sistema de seguridad",
  },
  buttonText: "¡Quiero Proteger mi Espacio!",
};
---

<section
  class="py-24 px-4 md:px-8  relative w-full"
  id="about"
>
  <div
    class="absolute top-0 left-0 w-full h-full pointer-events-none z-0"
  >
    <svg
      class="absolute top-20 left-10 w-64 h-64 opacity-[0.03] text-indian-red-500"
      width="100%"
      height="100%"
    >
      <defs>
        <pattern
          id="dots"
          x="0"
          y="0"
          width="20"
          height="20"
          patternUnits="userSpaceOnUse"
        >
          <circle cx="2" cy="2" r="2" fill="currentColor"></circle>
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="url(#dots)"></rect>
    </svg>
  </div>

  <div class="max-w-7xl mx-auto relative z-10">
    <div class="flex flex-col lg:flex-row gap-5 lg:gap-20 items-center">
      <div
        class="relative w-full lg:w-1/2 flex justify-center lg:justify-start"
      >
        <div class="relative w-full max-w-[500px] aspect-[4/5]">
          <div class="absolute -top-10 -left-30 w-80 h-40 opacity-70 z-0">
            <svg
              width="100%"
              height="100%"
              viewBox="0 0 100 100"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <pattern
                id="dot-pattern"
                x="0"
                y="0"
                width="20"
                height="20"
                patternUnits="userSpaceOnUse"
              >
                <circle cx="2" cy="2" r="2" fill="#DF643F"></circle>
              </pattern>
              <rect width="150" height="100" fill="url(#dot-pattern)"></rect>
            </svg>
          </div>

          <div
            class="image-blob-container relative w-full h-full z-10 overflow-hidden shadow-2xl bg-gray-100 group"
          >
            <img
              src={content.mainImage.src}
              alt={content.mainImage.alt}
              class="w-full h-full object-cover object-center group-hover:scale-110 transition-transform duration-500"
              loading="lazy"
            />
          </div>
          <div
            class="floating-badge-clients absolute top-[15%] -left-6 md:-left-12 z-20 flex flex-col items-center justify-center"
          >
            <div
              class="w-24 h-24 md:w-42 md:h-52 rounded-full border-4 border-white shadow-xl overflow-hidden bg-[#1a1a1a] relative group"
            >
              <img
                src={content.stats.clients.image}
                alt="Clients"
                class="w-full h-full object-cover opacity-80 group-hover:scale-110 transition-transform duration-500"
              />
            </div>
          </div>

          <div
            class="floating-badge-exp absolute bottom-8 -right-4 md:-right-10 z-20 bg-[#1a1a1a] text-white p-4 md:p-6 rounded-2xl shadow-xl border-l-4 border-indian-red-500 flex items-center gap-4 max-w-[200px] md:max-w-[240px]"
          >
            <div
              class="text-3xl md:text-4xl font-bold text-indian-red-500 font-display"
            >
              {content.stats.experience.value}
            </div>
            <div
              class="text-xs md:text-sm font-medium leading-tight text-gray-300 uppercase tracking-wide"
            >
              {content.stats.experience.label}
            </div>
          </div>
        </div>
      </div>

      <div class="w-full lg:w-1/2">
        <div class="text-content w-full">
          <!-- Subtitle -->
          <div class="flex items-center gap-2 mb-4">
            <span class="w-8 h-[2px] bg-indian-red-500"></span>
            <span
              class="text-indian-red-500 font-bold uppercase tracking-widest text-sm"
              >{content.subtitle}</span
            >
          </div>

          <h2
            class="font-display text-3xl md:text-4xl lg:text-5xl font-bold text-[#1a1a1a] mb-6 leading-tight"
          >
            {content.title}
          </h2>
          <p
            class="font-body text-base md:text-lg leading-relaxed text-gray-600 mb-8"
          >
            {content.description}
          </p>

          <ul class="mb-10 space-y-6">
            {
              content.features.map((feature) => (
                <li class="flex items-start gap-4 group">
                  <div class="icon-box flex-shrink-0 w-12 h-12 md:w-14 md:h-14 bg-white border border-indian-red-100 rounded-xl flex items-center justify-center text-indian-red-500 shadow-sm group-hover:shadow-md group-hover:border-indian-red-500 transition-all duration-300">
                    <Icon name={feature.icon} size="28" />
                  </div>
                  <div class="flex-1">
                    <h4 class="font-display text-lg font-bold text-[#1a1a1a] mb-1 group-hover:text-indian-red-500 transition-colors duration-300">
                      {feature.title}
                    </h4>
                    <p class="font-body text-sm md:text-base leading-relaxed text-gray-500">
                      {feature.description}
                    </p>
                  </div>
                </li>
              ))
            }
          </ul>

          <a
            href="/contact"
            class=" bg-indian-red-500 cursor-pointer text-white px-8 py-3.5 rounded-lg font-bold transition-all duration-300 shadow-lg shadow-indian-red-500/20 hover:shadow-xl hover:-translate-y-1"
          >
            {content.buttonText}
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .image-blob-container {
    border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
    transition: border-radius 5s ease-in-out infinite alternate;
    isolation: isolate;
  }

  @keyframes morphBlob {
    0% {
      border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
    }
    25% {
      border-radius: 58% 42% 75% 25% / 76% 46% 54% 24%;
    }
    50% {
      border-radius: 50% 50% 33% 67% / 55% 27% 73% 45%;
    }
    75% {
      border-radius: 33% 67% 58% 42% / 63% 68% 32% 37%;
    }
    100% {
      border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
    }
  }


  .image-blob-container {
    border-radius: 45% 55% 70% 30% / 40% 30% 10% 40%;
  }
</style>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("DOMContentLoaded", () => {
    // Animate Image Container
    gsap.from(".image-blob-container", {
      scrollTrigger: {
        trigger: ".image-blob-container",
        start: "top 80%",
        toggleActions: "play none none reverse",
      },
      scale: 0.9,
      opacity: 0,
      duration: 1.2,
      ease: "power3.out",
    });

    gsap.from(".floating-badge-clients", {
      scrollTrigger: {
        trigger: ".image-blob-container",
        start: "top 75%",
      },
      x: -50,
      opacity: 0,
      duration: 1,
      delay: 0.3,
      ease: "back.out(1.7)",
    });

    gsap.from(".floating-badge-exp", {
      scrollTrigger: {
        trigger: ".image-blob-container",
        start: "top 75%",
      },
      x: 50,
      opacity: 0,
      duration: 1,
      delay: 0.5,
      ease: "back.out(1.7)",
    });

    const textElements = gsap.utils.toArray(".text-content > *");
    gsap.from(textElements, {
      scrollTrigger: {
        trigger: ".text-content",
        start: "top 85%",
      },
      y: 30,
      opacity: 0,
      duration: 0.8,
      stagger: 0.1,
      ease: "power2.out",
    });
  });
</script>
