---
const allPartners = [
  {
    name: "Honeywell",
    logo: "/img/brands/hbt-honeywell-logo.avif",
    url: "https://www.honeywell.com/us/en",
  },
  {
    name: "Hikvision",
    logo: "/img/brands/hikvision.png",
    url: "https://www.hikvision.com/us-en/",
  },
  {
    name: "Ademco",
    logo: "/img/brands/ademco.png",
    url: "https://ademcosecurity.com/",
  },
  {
    name: "Keyscan",
    logo: "/img/brands/keyscan.png",
    url: "https://www.dormakaba.com/us-en",
  },
  {
    name: "Potter",
    logo: "/img/brands/potter.svg",
    url: "https://www.pottersignal.com/",
  },
  {
    name: "Napco",
    logo: "/img/brands/napco.png",
    url: "https://napcosecurity.com/",
  },
];

---

<section class="py-16 partners-section">
  <div class="relative w-full overflow-hidden">
    <!-- Swiper Container -->
    <div class="swiper partners-swiper">
      <div class="swiper-wrapper">
        {
          allPartners.map((partner, index) => (
            <div class="swiper-slide">
              <a
                href={partner.url}
                target="_blank"
                rel="noopener noreferrer"
                class="group relative transition-all duration-300 transform hover:scale-110 flex items-center justify-center h-full"
                title={`Visitar ${partner.name}`}
              >
                <div class="w-full grayscale group-hover:grayscale-0 transition-all duration-300 opacity-60 group-hover:opacity-100 flex items-center justify-center">
                  <img
                    src={partner.logo}
                    alt={partner.name}
                    class="w-auto h-full object-contain"
                    loading={index < 6 ? "eager" : "lazy"}
                  />
                </div>
              </a>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>

<style>
  /* Override global overflow-x: hidden for swiper functionality */
  .partners-section {
    overflow-x: visible !important;
  }

  .partners-swiper {
    padding: 1rem 0;
    width: 100%;
    min-height: 5rem;
    overflow: visible !important;
  }

  .swiper-slide {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: auto;
    min-height: 4rem;
  }

  /* Ensure images load properly and maintain aspect ratio */
  .swiper-slide img {
    display: block;
    width: auto;
    height: 100%;
    max-height: 3rem;
    max-width: 120px;
  }

  @media (min-width: 768px) {
    .swiper-slide img {
      max-height: 4rem;
      max-width: 160px;
    }
  }

  /* Prevent layout shift during load */
  .swiper-wrapper {
    align-items: center;
  }
</style>

<script>
  import Swiper from "swiper";
  import "swiper/css";
  import { Autoplay } from "swiper/modules";

  document.addEventListener("DOMContentLoaded", () => {
    new Swiper(".partners-swiper", {
      modules: [Autoplay],
      slidesPerView: 1,
      spaceBetween: 15,
      loop: true,
      centeredSlides: true,
      speed: 4000,
      autoplay: {
        delay: 2500,
        disableOnInteraction: false,
      },
      watchSlidesProgress: true,
      observer: true,
      observeParents: true,
      breakpoints: {
        480: {
          slidesPerView: 2.5,
          centeredSlides: true,
        },
        640: {
          slidesPerView: 2.5,
          centeredSlides: false,
        },
        768: {
          slidesPerView: 3,
          spaceBetween: 30,
          centeredSlides: false,
        },
        1024: {
          slidesPerView: 4,
          spaceBetween: 40,
          centeredSlides: false,
        },
        1280: {
          slidesPerView: 5,
          spaceBetween: 50,
          centeredSlides: false,
        },
      },
    });
  });
</script>
