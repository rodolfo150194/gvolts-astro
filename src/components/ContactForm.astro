---
// Contact Form Component
---

<form class="space-y-6" id="contact-form">
  <!-- Nombre y Correo -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div class="space-y-2">
      <label for="name" class="text-sm font-semibold text-slate-700">
        Nombre <span class="text-indian-red-500">*</span>
      </label>
      <input
        type="text"
        id="name"
        name="name"
        required
        placeholder="Tu nombre completo"
        class="w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 focus:border-indian-red-500 focus:ring-2 focus:ring-indian-red-200 outline-none transition-all"
      />
    </div>
    <div class="space-y-2">
      <label for="email" class="text-sm font-semibold text-slate-700">
        Correo Electrónico <span class="text-indian-red-500">*</span>
      </label>
      <input
        type="email"
        id="email"
        name="email"
        required
        placeholder="tucorreo@ejemplo.com"
        class="w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 focus:border-indian-red-500 focus:ring-2 focus:ring-indian-red-200 outline-none transition-all"
      />
    </div>
  </div>

  <!-- Teléfono y Servicio de Interés -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div class="space-y-2">
      <label for="phone" class="text-sm font-semibold text-slate-700">
        Teléfono <span class="text-indian-red-500">*</span>
      </label>
      <input
        type="tel"
        id="phone"
        name="phone"
        required
        placeholder="+1 (555) 000-0000"
        class="w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 focus:border-indian-red-500 focus:ring-2 focus:ring-indian-red-200 outline-none transition-all"
      />
    </div>
    <div class="space-y-2">
      <label for="service" class="text-sm font-semibold text-slate-700">
        Servicio de Interés <span class="text-indian-red-500">*</span>
      </label>
      <div class="relative">
        <select
          id="service"
          name="service"
          required
          class="w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 focus:border-indian-red-500 focus:ring-2 focus:ring-indian-red-200 outline-none transition-all appearance-none text-slate-600 cursor-pointer"
        >
          <option value="" disabled selected>Selecciona un servicio</option>
          <option value="fire-alarm">Alarmas contra Incendios</option>
          <option value="security">Videovigilancia y Seguridad</option>
          <option value="electricity">Servicios Eléctricos</option>
          <option value="access-control">Control de Acceso</option>
          <option value="monitoring">Monitoreo 24/7</option>
          <option value="maintenance">Mantenimiento</option>
          <option value="other">Otro</option>
        </select>
        <div class="absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none text-slate-500">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </div>
      </div>
    </div>
  </div>

  <!-- ZIP y Company Name -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div class="space-y-2">
      <label for="zip" class="text-sm font-semibold text-slate-700">
        Código Postal (ZIP) <span class="text-indian-red-500">*</span>
      </label>
      <input
        type="text"
        id="zip"
        name="zip"
        required
        placeholder="12345"
        maxlength="10"
        class="w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 focus:border-indian-red-500 focus:ring-2 focus:ring-indian-red-200 outline-none transition-all"
      />
    </div>
    <div class="space-y-2">
      <label for="company" class="text-sm font-semibold text-slate-700">
        Nombre de Empresa <span class="text-slate-400 text-xs">(Opcional)</span>
      </label>
      <input
        type="text"
        id="company"
        name="company"
        placeholder="Mi Empresa S.A."
        class="w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 focus:border-indian-red-500 focus:ring-2 focus:ring-indian-red-200 outline-none transition-all"
      />
    </div>
  </div>

  <!-- Dirección (opcional) -->
  <div class="space-y-2">
    <label for="address" class="text-sm font-semibold text-slate-700">
      Dirección <span class="text-slate-400 text-xs">(Opcional)</span>
    </label>
    <input
      type="text"
      id="address"
      name="address"
      placeholder="Calle, número, colonia/barrio"
      class="w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 focus:border-indian-red-500 focus:ring-2 focus:ring-indian-red-200 outline-none transition-all"
    />
  </div>

  <!-- Asunto -->
  <div class="space-y-2">
    <label for="subject" class="text-sm font-semibold text-slate-700">
      Asunto <span class="text-indian-red-500">*</span>
    </label>
    <input
      type="text"
      id="subject"
      name="subject"
      required
      placeholder="¿En qué podemos ayudarte?"
      class="w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 focus:border-indian-red-500 focus:ring-2 focus:ring-indian-red-200 outline-none transition-all"
    />
  </div>

  <!-- Mensaje -->
  <div class="space-y-2">
    <label for="message" class="text-sm font-semibold text-slate-700">
      Mensaje <span class="text-indian-red-500">*</span>
    </label>
    <textarea
      id="message"
      name="message"
      required
      rows="5"
      placeholder="Cuéntanos más detalles sobre tu proyecto o consulta..."
      class="w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 focus:border-indian-red-500 focus:ring-2 focus:ring-indian-red-200 outline-none transition-all resize-none"
    ></textarea>
  </div>

  <!-- Botón de envío -->
  <button
    type="submit"
    class="w-full cursor-pointer bg-indian-red-500 text-white font-bold py-4 rounded-xl hover:bg-indian-red-600 transition-colors shadow-lg shadow-indian-red-500/30 disabled:opacity-50 disabled:cursor-not-allowed"
  >
    <span class="submit-text">Enviar Mensaje</span>
    <span class="loading-text hidden">Enviando...</span>
  </button>

  <!-- Mensaje de éxito/error -->
  <div id="form-message" class="hidden p-4 rounded-xl text-sm font-medium"></div>
</form>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('contact-form') as HTMLFormElement;
    const formMessage = document.getElementById('form-message');
    const submitButton = form?.querySelector('button[type="submit"]');
    const submitText = submitButton?.querySelector('.submit-text');
    const loadingText = submitButton?.querySelector('.loading-text');

    form?.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Mostrar estado de carga
      if (submitButton) {
        submitButton.setAttribute('disabled', 'true');
      }
      submitText?.classList.add('hidden');
      loadingText?.classList.remove('hidden');
      formMessage?.classList.add('hidden');

      // Obtener datos del formulario
      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());

      try {
        // Aquí puedes integrar con tu API de backend
        // Por ahora, simulamos un envío exitoso
        await new Promise(resolve => setTimeout(resolve, 1500));

        // Mostrar mensaje de éxito
        if (formMessage) {
          formMessage.textContent = '✓ ¡Mensaje enviado exitosamente! Nos pondremos en contacto contigo pronto.';
          formMessage.className = 'p-4 rounded-xl text-sm font-medium bg-green-50 text-green-700 border border-green-200';
          formMessage.classList.remove('hidden');
        }

        // Limpiar formulario
        form.reset();

        // Log para desarrollo (remover en producción)
        console.log('Form data:', data);

      } catch (error) {
        // Mostrar mensaje de error
        if (formMessage) {
          formMessage.textContent = '✗ Hubo un error al enviar el mensaje. Por favor, intenta nuevamente.';
          formMessage.className = 'p-4 rounded-xl text-sm font-medium bg-red-50 text-red-700 border border-red-200';
          formMessage.classList.remove('hidden');
        }
        console.error('Error:', error);
      } finally {
        // Restaurar estado del botón
        if (submitButton) {
          submitButton.removeAttribute('disabled');
        }
        submitText?.classList.remove('hidden');
        loadingText?.classList.add('hidden');
      }
    });
  });
</script>
